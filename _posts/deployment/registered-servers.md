---
layout: post
template: one-col
title:  "Registered servers"
date:   2016-05-11 17:56:22
cloud66_text: "Try Cloud 66 for free"
cloud66_sticky: true
categories: deployment
lead: Deploy to your own infrastructure
search-tags: ['registered', 'servers', 'byos']
tags: ['Registered servers']
---

<h2>Contents</h2>
<ul class="page-toc">
	<li>
		<a href="#about">About registered servers</a>
	</li>
	<li>
		<a href="#install">Register a server</a>
	</li>
	<li>
		<a href="#pointers">Some pointers</a>
	</li>
</ul>

<h2 id="about">About registered servers</h2>
Registered servers are a great way for operations teams to manage and allocate physical server resources for consumption by dev teams. Registered servers are essentially a pool of your own servers on a private or public cloud that can be used on any stack and configuration. Stacks can be deployed across a hybrid of cloud and registered servers - in this way you could have a dedicated server for your database and burst cloud servers for your front end.

<h2 id="install">Register a server</h2>
You can add any physical server as a registered server using the website, or the Cloud 66 toolbelt as long as it meets [certain criteria](#pointers).
<h3>Website</h3>
Visit the [<i>Registered Servers</i>](https://app.cloud66.com/registered_servers) page on Cloud 66, which will provide with you a shell script to run on your server - you can download it to inspect it first.

Once the shell script has successfully completed, the server will now show up in the **New Servers** list for you to approve. Once it is approved, it will be available for you to use on any stack!

<div class="notice notice-warning">
	<h3>Note</h3>
    <p>The script generated by the URL is not the same and is time sensitive, so you can't save the script itself on your server.</p>
</div>

<h3>Cloud 66 Toolbelt</h3>
You can run the command below to register your servers using the [toolbelt](http://help.cloud66.com/toolbelt/toolbelt-introduction):

<pre class="prettyprint">
$ cx register-server --org="My Team" [--file=servers_file | --server=ip_address] --user=root
</pre>

To register a single server, use the `server` flag with the IP address, and to bulk register, provide a text file with the `file` flag with one IP address per line.

<h2 id="pointers">Some pointers</h2>
- Currently requires a **fresh install of Ubuntu 14.04**
- Once a server is registered and used, it **cannot be reused** until a fresh copy of Ubuntu is installed again - this is to prevent possible conflicts with old files.
- If your server is in a cloud with native security groups (such as AWS Security Groups) then you must manually configure them such that your registered servers are able to talk to each other and Cloud 66. Open at least TCP port 80, 443 and 22 to the outside world. Cloud 66 install a firewall on each box and blocking port 22. All servers must be allowed to communicate inside the security group on TCP port 6783. Port 6783 is needed to create the overlay network (Weave) for Docker stacks.  
- If your servers in a stack are in different regions, then they will not be able to use their internal IPs to communicate with each other, so you will have to change your app to use the external IP environment variables. Keep in mind that this may incur additional traffic costs.
- Existing BYOS users will now be able to scale up and add a load balancer via registered servers.
- Cross cloud stacks are now possible, but not recommended due to substantial latency and other potential issues.
