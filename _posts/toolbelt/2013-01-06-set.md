---
layout: post
template: two-col
title:  "Stack settings"
date:   2013-01-25 01:01:01
categories: toolbelt
lead: Change stack settings from the command line
---

<h2>Contents</h2>
<ul class="page-toc">
	<li>
		<a href="#available">Available settings</a>
	</li>
	<li>
		<a href="#parameters">Parameters</a>
	</li>
	<li>
		<a href="#usage">Usage</a>
	</li>
	<li>
		<a href="#examples">Examples</a>
	</li>
	        <li>
                <ul>
                <li><a href="#branch">Change Git branch</a></li>
                </ul>
            </li>
            <li>
                <ul>
                <li><a href="#url">Change Git URL</a></li>
                </ul>
            </li>
            <li>
                <ul>
                <li><a href="#nginx">Reconfigure Nginx</a></li>
                </ul>
            </li>
            <li>
                <ul>
                <li><a href="#web">Set allowed web source</a></li>
                </ul>
            </li>
</ul>


You can change stack settings from the command line - the `settings` command will list the possible settings for a specific stack:

{% highlight bash %}
$ c66 settings --stack STACK_UID
{% endhighlight %}

<h3 id="available">Available settings</h3>
<ul>
<li><code>git.branch</code></li>
Change the Git branch of the stack repository.
<li><code>git.repository</code></li>
Change the Git repository URL.
<li><code>reconfigure.nginx</code></li>
If set to true, it will regenerate Nginx configuration and restart it.
<li><code>allowed.web.source</code></li>
IP addresses that are allowed to access a stacks web servers.
</ul>

<h3 id="parameters">Parameters</h3>
<ul>
<li><code>stack</code></li>
UID of the stack (alias: <i>s</i>)
<li><code>setting_name</code></li>
A valid setting (alias: <i>n</i>)
<li><code>value</code></li>
A valid value for the setting (alias: <i>v</i>)
</ul>

<h3 id="usage">Usage</h3>
{% highlight bash %}
$ c66 set --stack STACK_UID --setting_name SETTING_NAME --value VALUE
{% endhighlight %}


<h3 id="examples">Examples</h3>
The first example will use the full names for each parameter, and the following will make use of aliases.

<h4 id="branch">Change Git branch</h4>
{% highlight bash %}
$ c66 set --stack ba89f0edfa254d46ba9e15920e7f69be --setting_name git.branch --value master
{% endhighlight %}

<h4 id="url">Change Git URL</h4>
{% highlight bash %}
$ c66 set -s ba89f0edfa254d46ba9e15920e7f69be -n git.repository -v git://github.com/cloud66-samples/rails-mysql.git
{% endhighlight %}

<h4 id="nginx">Reconfigure Nginx</h4>
{% highlight bash %}
$ c66 set -s ba89f0edfa254d46ba9e15920e7f69be -n reconfigure.nginx -v true
{% endhighlight %}

The `reconfigure.nginx` setting is restricted to only affect the next deployment. It can only be set to `true` and will be reset back to `false` after the next deployment.

Setting it to true will force the deployment process to regenerate Nginx settings. This can be useful when you change an Nginx-related setting in your [manifest file](/stack-features/manifest-files.html), like enabling _Perfect Forward Secrecy_.

<h4 id="web">Set allowed web source</h4>
You can specify the addresses that can access your web servers by changing the value of `allowed.web.source`. The default value is empty, and will allow all public access to your web servers.

{% highlight bash %}
$ c66 set --stack ba89f0edfa254d46ba9e15920e7f69be -s allowed.web.source -v 10.10.1.4/24,23.12.1.4
{% endhighlight %}

You can either specify IP addresses in the command or use a CSV file with IP addresses as an input.